#+TITLE: emacs-mine - An emacs study kit
#+STARTUP: content
#+OPTIONS: toc:4 h:4

* Description
  /(This was originally my emacs configuration backup repository)/

  There are hundreds of emacs config repositories on github (prelude,
  emacs-live, spacemacs, etc). I started by including them individualy
  as submodule (so called "/emacs mine/") and load particular /mine/
  specified by environment variable $EMACS_MINE on emacs startup. Thus I
  can easily taste and study them, not mess up my own configuration.

  Since the environment variable solution is not convenient, new
  /mine/ management and selection is WIP.
* Boot your emacs
** Load mine list
   #+BEGIN_SRC emacs-lisp
     ;; Common setting and variables
     (prefer-coding-system 'utf-8)
     (set-language-environment 'utf-8)
     (set-locale-environment "utf-8")

     (let ((mine "constnil"))
       (message "start mine \"%s\" loading on %s" mine system-type)

       ;; try load ~/.local-preset.el to setup prerequests, if exists
       (load (expand-file-name "~/.preset.el") 'noerror)

       (let ((user-dir (file-name-as-directory user-emacs-directory)))
	 (setq user-emacs-directory
	       (file-name-as-directory (concat user-dir "mines/" mine))))
       (message "root path of mine \"%s\": %s" mine user-emacs-directory)

       ;; Set package.el 'elpa' directory to mine's own elpa directory
       (require 'package)
       (setq package-user-dir (concat user-emacs-directory "elpa/"))

       ;; Load mine preset file if exists.
       ;; Opportunity for adjusting given mine, such as change mine-init-file, etc.
       (load (concat user-emacs-directory mine ".el") 'noerror)

       ;; Set emacs customize file for loading mine.
       (setq custom-file (concat user-emacs-directory ".custom.el"))
       (load custom-file 'noerror)

       (let ((init-file (concat user-emacs-directory mine ".el")))
	 (if (file-exists-p init-file)
	     (setq user-init-file init-file)
	   (setq user-init-file (concat user-emacs-directory "init.el"))))
       (load user-init-file)

       ;; Personal settings can be set in ~/.personal.el file, if exists.
       (load (expand-file-name "~/.personal.el") 'noerror)

       ;; Load post set file if exists. I use it to specify machine local
       ;; settings such as font size, frame size, etc.
       (load (expand-file-name "~/.postset.el") 'noerror)

       ;; Done
       (message "mine \"%s\" loaded" mine))
   #+END_SRC
